import { Component, OnInit } from '@angular/core';
import { htmlAstToRender3Ast } from '@angular/compiler/src/render3/r3_template_transform';
import { stringify } from '@angular/core/src/render3/util';
import { Config } from 'protractor';
import { ConfigService } from './config.service';

@Component({
  selector: 'app-config',
  templateUrl: './config.component.html',
  styleUrls: ['./config.component.scss']
})
export class ConfigComponent implements OnInit {

  welcomeMessage;
  success = false;

  constructor(private configService: ConfigService) { }

  ngOnInit() {
    this.configService.getName().subscribe(data => {
      this.welcomeMessage = data;
    })

    if (this.welcomeMessage == undefined) {
      this.welcomeMessage = 'Guest';
    }
  }

  onSubmitUsername() {
    var usernameHolder = <HTMLInputElement>document.getElementById('newUsername');
    var username = usernameHolder.value;
    if (username != "") {
      this.configService.setUsername(username).subscribe(data => {
        this.welcomeMessage = data;
        this.success = true;
      })
    }
  }

  onSubmitPassword() {
    var passwordHolder = <HTMLInputElement>document.getElementById('newPassword');
    var password = passwordHolder.value;
    if (password != "") {
      this.configService.setPassword(password).subscribe(data => {
        this.success = true;
      });
    }
  }
}
